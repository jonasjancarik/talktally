(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2837)}])},2837:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(5893),s=a(7294),i=function(e){let{seconds:t,includeMilliseconds:a=!0,secondsPadding:n=2,millisecondsDecimals:s=2}=e;if(t<0)throw Error("Seconds cannot be negative");let i=Math.floor(t%60),r="".concat(Math.floor(t/60).toString().padStart(n,"0"),":").concat(i.toString().padStart(n,"0"));if(a){let e=t-Math.floor(t),a=Math.pow(10,s);(e=Math.round(e*a))===a&&(i+=1,e=0);let n=e.toString().padStart(s,"0");r+=".".concat(n)}return r},r=function(e){let{speaker:t,handleSpeakerAction:a}=e,[r,c]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=null;return t.isActive?(c(0),e=setInterval(()=>{c(e=>e+.01),a(t.id,"updateTime",.01)},10)):clearInterval(e),()=>clearInterval(e)},[t.isActive,t.id,a]),(0,n.jsxs)("div",{className:"card p-3",children:[(0,n.jsx)("h5",{className:"card-title",children:t.name}),(0,n.jsxs)("p",{className:"card-text",children:["Time: ",(0,n.jsx)(i,{seconds:r})]}),(0,n.jsxs)("p",{className:"card-text",children:["Total Time: ",(0,n.jsx)(i,{seconds:t.totalTime})]}),(0,n.jsxs)("p",{className:"card-text",children:["Floor Count: ",t.floorCount]}),(0,n.jsx)("button",{onClick:()=>a(t.id,t.isActive?"pause":"start"),className:"btn ".concat(t.isActive?"btn-secondary":"btn-primary"),children:t.isActive?"Pause":"Start"}),(0,n.jsx)("button",{onClick:()=>a(t.id,t.handRaised?"lowerHand":"raiseHand"),className:"btn ".concat(t.handRaised?"btn-danger":"btn-success"," mt-2"),children:t.handRaised?"Lower Hand":"Raise Hand"})]})},c=function(e){let{speakers:t,onHandleSpeakerAction:a}=e,i=t.sort((e,t)=>e.handRaisedTime-t.handRaisedTime),[r,c]=(0,s.useState)(Date.now());(0,s.useEffect)(()=>{let e=setInterval(()=>{c(Date.now())},1e3);return()=>clearInterval(e)},[]);let l=e=>{if(!e)return"";let t=Math.floor((r-e)/1e3);if(t<0)return"0 seconds ago";if(t<60)return"".concat(t," second").concat(1===t?"":"s"," ago");let a=Math.floor(t/60);if(a<60)return"".concat(a," minute").concat(1===a?"":"s"," ago");let n=(a/60).toFixed(1);if(n<24)return"".concat(n," hour").concat("1.0"===n?"":"s"," ago");let s=(n/24).toFixed(1);if(s<365)return"".concat(s," day").concat("1.0"===s?"":"s"," ago");let i=(s/365).toFixed(1);return"".concat(i," year").concat("1.0"===i?"":"s"," ago")};return(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("ul",{className:"list-group",children:i.map(e=>(0,n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.name,(0,n.jsxs)("span",{children:["(",l(e.handRaisedTime),")"]}),(0,n.jsx)("button",{onClick:()=>a(e.id,"lowerHand"),className:"btn btn-danger",children:"Lower Hand"}),(0,n.jsx)("button",{onClick:()=>a(e.id,"giveFloor"),className:"btn btn-success ml-2",children:"Give Floor"})]},e.id))})})},l=function(e){let{speakers:t}=e;return(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)("ul",{className:"list-group",children:t.sort((e,t)=>t.totalTime-e.totalTime).map((e,t)=>(0,n.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.name,(0,n.jsx)("span",{className:"badge bg-primary rounded-pill",children:i({seconds:e.totalTime})})]},t))})})};function o(){let[e,t]=(0,s.useState)([]),a=(0,s.useCallback)(function(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t(t=>t.map(s=>{if(s.id!==e)return"start"===a||"giveFloor"===a?{...s,isActive:!1}:s;switch(a){case"start":return t.forEach(t=>{t.id!==e&&(t.isActive=!1)}),{...s,isActive:!0,handRaised:!1,floorCount:s.floorCount+1};case"pause":return{...s,isActive:!1};case"updateTime":return{...s,totalTime:s.totalTime+n};case"raiseHand":return{...s,handRaised:!0,handRaisedTime:new Date};case"lowerHand":return{...s,handRaised:!1,handRaisedTime:null};case"giveFloor":return t.forEach(t=>{t.id!==e&&(t.isActive=!1)}),{...s,isActive:!0,handRaised:!1,floorCount:s.floorCount+1,handRaisedTime:null};default:return s}}))},[]);return(0,n.jsxs)("div",{className:"container py-5",children:[(0,n.jsxs)("div",{className:"row",children:[e.sort((e,t)=>e.id-t.id).map(e=>(0,n.jsx)("div",{className:"col-md-4 mb-3",children:(0,n.jsx)(r,{speaker:e,handleSpeakerAction:a})},e.id)),(0,n.jsx)("div",{className:"col-md-4 mb-3",children:(0,n.jsx)("button",{type:"button",onClick:()=>{let a=prompt("Enter the speaker's name:");a&&t([...e,{id:Date.now(),name:a,isActive:!1,totalTime:0,floorCount:0,handRaised:!1,handRaisedTime:null}])},className:"btn btn-primary w-100 h-100",children:"Add Speaker"})})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("h2",{children:"Raised Hands"}),e.filter(e=>e.handRaised).length>0?(0,n.jsx)(c,{speakers:e.filter(e=>e.handRaised),onHandleSpeakerAction:a}):(0,n.jsx)("em",{children:"Queue empty"})]}),(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("h2",{children:"Leaderboard"}),(0,n.jsx)(l,{speakers:e})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);